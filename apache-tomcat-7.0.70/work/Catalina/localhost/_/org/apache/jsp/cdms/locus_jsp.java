/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.70
 * Generated at: 2019-01-08 06:22:42 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.cdms;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import java.lang.*;
import com.fastunit.Var;
import com.fastunit.util.Checker;

public final class locus_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=utf-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");

String cph=request.getParameter("cph");
if(Checker.isEmpty(cph)){
    cph="";
}

      out.write("\r\n");
      out.write("<!-- 重点参数：renderOptions -->\r\n");
      out.write("<html lang=\"zh-CN\">\r\n");
      out.write("\r\n");
      out.write("<head>\r\n");
      out.write("    <!-- 原始地址：//webapi.amap.com/ui/1.0/ui/misc/PathSimplifier/examples/navigators.html -->\r\n");
      out.write("    <!-- <base href=\"//webapi.amap.com/ui/1.0/ui/misc/PathSimplifier/examples/\" /> -->\r\n");
      out.write("\r\n");
      out.write("    <meta charset=\"utf-8\">\r\n");
      out.write("    <meta name=\"viewport\" content=\"initial-scale=1.0, user-scalable=no, width=device-width\">\r\n");
      out.write("    <title>轨迹回放</title>\r\n");
      out.write("    <script type=\"text/javascript\" src='//webapi.amap.com/maps?v=1.4.3&key=16c83a3fef165e22dfd8a9f976e880ee'></script>\r\n");
      out.write("    <script src=\"http://cache.amap.com/lbs/static/es5.min.js\"></script>\r\n");
      out.write("    <!-- UI组件库 1.0 -->\r\n");
      out.write("    <script src=\"//webapi.amap.com/ui/1.0/main.js?v=1.0.11\"></script>\r\n");
      out.write("    <link rel=\"stylesheet\" href=\"./css/bootstrap.min.css\" />\r\n");
      out.write("    <link rel=\"stylesheet\" type=\"text/css\" href=\"./css/xcConfirm.css\"/>\r\n");
      out.write("    <script type=\"text/javascript\" src=\"./js/jquery.min.js\"></script>\r\n");
      out.write("    <script type=\"text/javascript\" src=\"./js/bootstrap.min.js\"></script>\r\n");
      out.write("\t<!-- 引入样式 -->\r\n");
      out.write("\t<link rel=\"stylesheet\"\r\n");
      out.write("\t\thref=\"https://cdn.bootcss.com/element-ui/2.3.4/theme-chalk/index.css\">\r\n");
      out.write("\t<!-- 先引入 Vue -->\r\n");
      out.write("\t<script src=\"https://cdn.bootcss.com/vue/2.5.16/vue.js\"></script>\r\n");
      out.write("\t<!-- 引入组件库 -->\r\n");
      out.write("\t<script src=\"https://cdn.bootcss.com/element-ui/2.3.4/index.js\"></script>\r\n");
      out.write("    <script src=\"./js/jqueryManager.JS\"></script>\r\n");
      out.write("    <script src=\"./js/xcConfirm.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\r\n");
      out.write("    \r\n");
      out.write("    <style>\r\n");
      out.write("        .alert {\r\n");
      out.write("    display: none;\r\n");
      out.write("    z-index: 99999;\r\n");
      out.write("    padding: 15px;\r\n");
      out.write("    border: 1px solid transparent;\r\n");
      out.write("    border-radius: 4px;\r\n");
      out.write("\r\n");
      out.write("\tposition: fixed;\r\n");
      out.write("    top: 0px;\r\n");
      out.write("    left: 0px;\r\n");
      out.write("    right: 0px;\r\n");
      out.write("    bottom: 0px;\r\n");
      out.write("    margin: auto;\r\n");
      out.write("\twidth: 150px;\r\n");
      out.write("\theight: 50px;\r\n");
      out.write("\toverflow: hidden;\r\n");
      out.write("    opacity:0.9;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".alert-success {\r\n");
      out.write("\ttext-align: center;\r\n");
      out.write("    color: #333333;\r\n");
      out.write("    background-color: #FFFFFF;\r\n");
      out.write("    border-color: #FFFFFF;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".alert-info {\r\n");
      out.write("    color: #31708f;\r\n");
      out.write("    background-color: #d9edf7;\r\n");
      out.write("    border-color: #bce8f1;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".alert-warning {\r\n");
      out.write("    color: #8a6d3b;\r\n");
      out.write("    background-color: #fcf8e3;\r\n");
      out.write("    border-color: #faebcc;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".alert-danger {\r\n");
      out.write("    color: #a94442;\r\n");
      out.write("    background-color: #f2dede;\r\n");
      out.write("    border-color: #ebccd1;\r\n");
      out.write("}\r\n");
      out.write("        .amap-logo {\r\n");
      out.write("            display: none !important;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .amap-copyright {\r\n");
      out.write("            display: none !important;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        #container {\r\n");
      out.write("            width: 100%;\r\n");
      out.write("            height: 100%;\r\n");
      out.write("            margin: 0px;\r\n");
      out.write("            /* margin-bottom: 200px; */\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        #bottom {\r\n");
      out.write("            height: 200px;\r\n");
      out.write("            overflow: auto;\r\n");
      out.write("            background-color: #fff;\r\n");
      out.write("            border-radius: 3px;\r\n");
      out.write("            position: absolute;\r\n");
      out.write("            bottom: 10px;\r\n");
      out.write("            left: 10px;\r\n");
      out.write("            right: 10px;\r\n");
      out.write("            opacity: 0.9;\r\n");
      out.write("            filter: alpha(opacity=90);\r\n");
      out.write("            box-shadow: 0 3px 14px rgba(0, 0, 100, 0.6);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        #tip {\r\n");
      out.write("            width: 300px;\r\n");
      out.write("            background-color: #fff;\r\n");
      out.write("            padding: 10 20px;\r\n");
      out.write("            position: absolute;\r\n");
      out.write("            font-size: 14px;\r\n");
      out.write("            right: 10px;\r\n");
      out.write("            top: 10px;\r\n");
      out.write("            border-radius: 3px;\r\n");
      out.write("            opacity: 0.9;\r\n");
      out.write("            filter: alpha(opacity=90);\r\n");
      out.write("            box-shadow: 0 3px 14px rgba(0, 0, 100, 0.6);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        #max {\r\n");
      out.write("            width: 20px;\r\n");
      out.write("            height: 20px;\r\n");
      out.write("            display: none;\r\n");
      out.write("            position: fixed;\r\n");
      out.write("            bottom: 0px;\r\n");
      out.write("            right: 0px;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .close {\r\n");
      out.write("            float: right;\r\n");
      out.write("            font-size: 21px;\r\n");
      out.write("            font-weight: 700;\r\n");
      out.write("            line-height: 1;\r\n");
      out.write("            color: #409EFF;\r\n");
      out.write("            text-shadow: 0 1px 0 #fff;\r\n");
      out.write("            opacity: 0.8;\r\n");
      out.write("            filter: alpha(opacity=20);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .close:hover,\r\n");
      out.write("        .close:focus {\r\n");
      out.write("            color: #2a6496;\r\n");
      out.write("            text-decoration: none;\r\n");
      out.write("            cursor: pointer;\r\n");
      out.write("            opacity: .8;\r\n");
      out.write("            filter: alpha(opacity=50);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        img{\r\n");
      out.write("            cursor:pointer ;\r\n");
      out.write("        }\r\n");
      out.write("        #img1,#img2{\r\n");
      out.write("            display: none;\r\n");
      out.write("        }\r\n");
      out.write("        \r\n");
      out.write("        #img3,#img4{\r\n");
      out.write("            cursor:default ;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .fixed_headers1 thead tr {\r\n");
      out.write("            display: block;\r\n");
      out.write("            position: relative;\r\n");
      out.write("        }\r\n");
      out.write("        .fixed_headers1 tbody {\r\n");
      out.write("            display: block;\r\n");
      out.write("            overflow: auto;\r\n");
      out.write("        }\r\n");
      out.write("        /* 每列宽度 */\r\n");
      out.write("\r\n");
      out.write("        .fixed_headers1 td:nth-child(1),\r\n");
      out.write("        .fixed_headers1 th:nth-child(1) {\r\n");
      out.write("            min-width: 100px;\r\n");
      out.write("            /* 滚动条 */\r\n");
      out.write("            text-overflow:ellipsis;\r\n");
      out.write("            white-space:nowrap;\r\n");
      out.write("            overflow:hidden;\r\n");
      out.write("        }\r\n");
      out.write("        .fixed_headers1 td:nth-child(2),\r\n");
      out.write("        .fixed_headers1 th:nth-child(2) {\r\n");
      out.write("            min-width: 220px;\r\n");
      out.write("        }\r\n");
      out.write("        .fixed_headers1 td:nth-child(3),\r\n");
      out.write("        .fixed_headers1 th:nth-child(3) {\r\n");
      out.write("            min-width: 100px;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .fixed_headers1 td:nth-child(4),\r\n");
      out.write("        .fixed_headers1 th:nth-child(4) {\r\n");
      out.write("            min-width: 100px;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .fixed_headers1 td:nth-child(5),\r\n");
      out.write("        .fixed_headers1 th:nth-child(5) {\r\n");
      out.write("            min-width: 550px;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .fixed_headers1 td:nth-child(6),\r\n");
      out.write("        .fixed_headers1 th:nth-child(6) {\r\n");
      out.write("            min-width: 420px;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .fixed_headers thead tr {\r\n");
      out.write("            display: block;\r\n");
      out.write("            position: relative;\r\n");
      out.write("        }\r\n");
      out.write("        .fixed_headers tbody {\r\n");
      out.write("            display: block;\r\n");
      out.write("            overflow: auto;\r\n");
      out.write("        }\r\n");
      out.write("        /* 每列宽度 */\r\n");
      out.write("\r\n");
      out.write("        .fixed_headers td:nth-child(1),\r\n");
      out.write("        .fixed_headers th:nth-child(1) {\r\n");
      out.write("            min-width: 100px;\r\n");
      out.write("            /* 滚动条 */\r\n");
      out.write("            text-overflow:ellipsis;\r\n");
      out.write("            white-space:nowrap;\r\n");
      out.write("            overflow:hidden;\r\n");
      out.write("        }\r\n");
      out.write("        .fixed_headers td:nth-child(2),\r\n");
      out.write("        .fixed_headers th:nth-child(2) {\r\n");
      out.write("            min-width: 230px;\r\n");
      out.write("        }\r\n");
      out.write("        .fixed_headers td:nth-child(3),\r\n");
      out.write("        .fixed_headers th:nth-child(3) {\r\n");
      out.write("            min-width: 230px;\r\n");
      out.write("        }\r\n");
      out.write("    </style>\r\n");
      out.write("</head>\r\n");
      out.write("\r\n");
      out.write("<body>\r\n");
      out.write("<div id=\"app\">\r\n");
      out.write("    <div id=\"outer-box\">\r\n");
      out.write("        <div id=\"container\"></div>\r\n");
      out.write("    </div>\r\n");
      out.write("    <div id=\"tip\">\r\n");
      out.write("        <form class=\"form-horizontal\" role=\"form\">\r\n");
      out.write("            <div class=\"form-group\">\r\n");
      out.write("                <label for=\"carnumber\"  class=\"col-sm-4 control-label\" >车牌号码</label>\r\n");
      out.write("                <div class=\"col-sm-6\">\r\n");
      out.write("                    <input style=\"height:32px;\"  placeholder=\"请输入车牌号\" class=\"el-input__inner\" name=\"cph\"></input>\r\n");
      out.write("                </div>\r\n");
      out.write("                <img style=\"padding-top: 6px;\" class=\"col-sm-2\" src=\"/img/add.png\" data-toggle=\"modal\" data-target=\"#myModal\">\r\n");
      out.write("            </div>\r\n");
      out.write("            <div class=\"form-group\">\r\n");
      out.write("                <label for=\"carnumber\" class=\"col-sm-4 control-label\">开始时间</label>\r\n");
      out.write("                <div class=\"col-sm-6\">\r\n");
      out.write("                    <template>\r\n");
      out.write("                        <div class=\"block\">\r\n");
      out.write("                            <el-date-picker \r\n");
      out.write("                            size=\"small\" \r\n");
      out.write("                            style=\"width: 165px;\" \r\n");
      out.write("                            v-model=\"value2\"\r\n");
      out.write("                            type=\"datetime\" \r\n");
      out.write("                            placeholder=\"选择日期时间\" \r\n");
      out.write("                            align=\"right\" :picker-options=\"pickerOptions1\"\r\n");
      out.write("                            id='value2' >\r\n");
      out.write("                            \r\n");
      out.write("                            </el-date-picker>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </template>\r\n");
      out.write("\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("            <div class=\"form-group\">\r\n");
      out.write("                <label for=\"carnumber\" class=\"col-sm-4 control-label\">结束时间</label>\r\n");
      out.write("                <div class=\"col-sm-6\">\r\n");
      out.write("                    <template>\r\n");
      out.write("                        <div class=\"block\">\r\n");
      out.write("                            <el-date-picker \r\n");
      out.write("                            size=\"small\" \r\n");
      out.write("                            style=\"width: 165px;\" \r\n");
      out.write("                            v-model=\"value3\" \r\n");
      out.write("                            type=\"datetime\" \r\n");
      out.write("                            placeholder=\"选择日期时间\" \r\n");
      out.write("                            align=\"right\" :picker-options=\"pickerOptions2\"\r\n");
      out.write("                            id='value3'>\r\n");
      out.write("                            </el-date-picker>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </template>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("            <!-- icon=\"el-icon-search\" -->\r\n");
      out.write("            <el-button id=\"cx\"\r\n");
      out.write("            style=\"float: right;width: 100px;\" \r\n");
      out.write("            size=\"small\" \r\n");
      out.write("            v-on:click=\"query\">查询</el-button>\r\n");
      out.write("        </form>\r\n");
      out.write("    </div>\r\n");
      out.write("    <div id=\"max\">\r\n");
      out.write("        <img src=\"/img/max.png\">\r\n");
      out.write("    </div>\r\n");
      out.write("    <div id=\"bottom\">\r\n");
      out.write("        <div class=\"row\" style=\"margin: 0px; padding: 0; border-bottom: 1px solid #e5e5e5; min-height: 16.42857143px; font-size: 14px;\">\r\n");
      out.write("            <div class=\"col-md-4\" style=\"height: 50px; line-height: 50px; margin: 0px; padding: 0; padding-left: 10px;\">轨迹数据</div>\r\n");
      out.write("            <div id=\"toolsbar\" class=\"col-md-1\" style=\"width: 56px; margin-top: 11px; padding-right: 0;\">\r\n");
      out.write("                <img style=\"width: 30px;\" src=\"/img/export.png\" onclick=\"daochu()\">\r\n");
      out.write("            </div>\r\n");
      out.write("            <div id=\"routes-container\" class=\"col-md-7 row\" style=\"margin: 0px; padding: 0; text-align: center; padding-top: 10px;\">\r\n");
      out.write("            </div>\r\n");
      out.write("            <div class=\"col\">\r\n");
      out.write("                <el-button size=\"small\" id=\"min\" style=\"float: right;\">\r\n");
      out.write("                    <img src=\"/img/min.png\" style=\"width: 14px;\"> </el-button>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("        </div>\r\n");
      out.write("        \r\n");
      out.write("        <table id=\"t1\" class=\"table coma-base-table fixed_headers1\" style=\"font-size: 14px;margin-bottom: 0px;\">   \r\n");
      out.write("            <thead>\r\n");
      out.write("                        <tr>\r\n");
      out.write("                            <th>车牌号</th>\r\n");
      out.write("                            <th>时间</th>\r\n");
      out.write("                            <th>速度km/h</th>\r\n");
      out.write("                            <th>里程km</th>\r\n");
      out.write("                            <th>定位</th>\r\n");
      out.write("                            <th>状态</th>\r\n");
      out.write("                        </tr>\r\n");
      out.write("                    </thead>\r\n");
      out.write("                <tbody id=\"location\"></tbody>                                \r\n");
      out.write("                <tfoot>\r\n");
      out.write("                    <tr><td align='center' colspan=\"6\" onclick=\"jz()\" id=\"jzgd\">无数据</td></tr>\r\n");
      out.write("                </tfoot>\r\n");
      out.write("            </table>\r\n");
      out.write("</div>\r\n");
      out.write("    <!-- 选择车辆模态框（Modal） -->\r\n");
      out.write("    <div class=\"modal fade\" id=\"myModal\" tabindex=\"0\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\r\n");
      out.write("        <div class=\"modal-dialog\">\r\n");
      out.write("            <div class=\"modal-content\">\r\n");
      out.write("                <div class=\"modal-header\">\r\n");
      out.write("                    <a class=\"close\" data-dismiss=\"modal\">×</a>\r\n");
      out.write("                    <span class=\"modal-title\" id=\"myModalLabel\">选择车辆</span>\r\n");
      out.write("                </div>\r\n");
      out.write("\r\n");
      out.write("                <div class=\"modal-body\" style=\"padding-bottom: 0px;\">\r\n");
      out.write("                    <form class=\"form-horizontal\" role=\"form\" style=\"font-size: 14px;\">\r\n");
      out.write("                        <div class=\"form-group\">\r\n");
      out.write("                            <label for=\"fencetype\" class=\"col-sm-2 control-label\">车组</label>\r\n");
      out.write("                            <div class=\"col-sm-7\">\r\n");
      out.write("                                <select class=\"form-control input-sm\" id=\"fencetype\">\r\n");
      out.write("                                    \r\n");
      out.write("                                </select>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <el-button class=\"col-sm-2\" icon=\"el-icon-search\" onclick=\"czquery()\" size=\"small\">查询</el-button>\r\n");
      out.write("                        </div>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                        <div class=\"form-group\" style=\"height: 350px; overflow-x: hidden\">\r\n");
      out.write("                            <label class=\"col-sm-2 control-label\">车辆列表</label>\r\n");
      out.write("                            <table class=\"table table-hover coma-base-table fixed_headers\" style=\"font-size: 14px;padding-bottom: 0px;\">\r\n");
      out.write("                                <thead>\r\n");
      out.write("                                    <tr>\r\n");
      out.write("                                        <th>\r\n");
      out.write("                                        </th>\r\n");
      out.write("                                        <th>车牌号</th>\r\n");
      out.write("                                        <th>车组名</th>\r\n");
      out.write("                                    </tr>\r\n");
      out.write("                                </thead>\r\n");
      out.write("                                <tbody id=\"tb\">\r\n");
      out.write("\r\n");
      out.write("                                </tbody>\r\n");
      out.write("                                <tfoot>\r\n");
      out.write("                                    <tr><td style=\"display:block;\" align='center' colspan=\"6\" id=\"nodata\">无数据</td></tr>\r\n");
      out.write("                                </tfoot>\r\n");
      out.write("                            </table>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </form>\r\n");
      out.write("\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"modal-footer\" style=\"border: none;padding-top: 0px;\">\r\n");
      out.write("                    <el-button type=\"primary\" data-dismiss=\"modal\" onclick=\"xzCar()\" size=\"small\" icon=\"el-icon-check\">确定</el-button>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("            <!-- /.modal-content -->\r\n");
      out.write("        </div>\r\n");
      out.write("        <!-- /.modal -->\r\n");
      out.write("    </div>\r\n");
      out.write("</div>\r\n");
      out.write("            <!-- 栾浪浪js -->\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("var navgtr;\r\n");
      out.write("function jump(t) {\r\n");
      out.write("    // $(t).css(\"background-color\",\"#409EFF\").siblings().css(\"background\",\"none\");\r\n");
      out.write("    navgtr.moveToPoint($(t).attr(\"id\"),0)\r\n");
      out.write("\tnavgtr.pause()\r\n");
      out.write("    scroll();\r\n");
      out.write("\t\r\n");
      out.write("};\r\n");
      out.write("function mapload(dl,name){\r\n");
      out.write("    var map = new AMap.Map('container', {\r\n");
      out.write("        resizeEnable: true\r\n");
      out.write("    });\r\n");
      out.write("    AMapUI.load(['ui/misc/PathSimplifier', 'lib/$'], function (PathSimplifier, $) {\r\n");
      out.write("        //轨迹展示组件目前依赖Canvas进行绘制，因此不支持IE9及以下浏览器。\r\n");
      out.write("        if (!PathSimplifier.supportCanvas) {\r\n");
      out.write("            alert('当前环境不支持 Canvas！');\r\n");
      out.write("            return;\r\n");
      out.write("        }\r\n");
      out.write("        //定义一个全局的colors数组\r\n");
      out.write("        var colors = [\"#3366cc\"];\r\n");
      out.write("        //轨迹图标数组，正常使用中、车辆维修中、终端维护中、车辆报废中，停车、怠速(报警、离线)\r\n");
      out.write("        var iconarr = [\"\",\"../img/green/car1.png\",\"../img/gray/car1.png\",\"../img/gray/car1.png\",\"../img/gray/car1.png\",\"../img/blue/car1.png\",\"../img/orange/car1.png\",\"../img/red/car1.png\",\"../img/gray/car1.png\"];\r\n");
      out.write("        //行车轨迹颜色数组，正常行驶用绿色，超速报警、出区域报警、非工作时间用车报警用不同颜色连线表示\r\n");
      out.write("        var colorarr = [\"#0bb650\",\"#3c7fff\",\"#ff9600\",\"#ff0000\"];\r\n");
      out.write("        \r\n");
      out.write("        ////创建轨迹展示组件实例\r\n");
      out.write("        var pathSimplifierIns = new PathSimplifier({\r\n");
      out.write("            zIndex: 100,//绘制用图层的叠加顺序值 。如果需要叠加在地图的最上层，可以设置一个较大的值\r\n");
      out.write("            map: map, //所属的地图实例\r\n");
      out.write("            getPath: function (pathData, pathIndex) {\r\n");
      out.write("                //返回轨迹数据中的节点坐标信息\r\n");
      out.write("                return pathData.path;\r\n");
      out.write("            },\r\n");
      out.write("            getHoverTitle: function (pathData, pathIndex, pointIndex) {\r\n");
      out.write("                //返回鼠标悬停时显示的信息\r\n");
      out.write("                if (pointIndex >= 0) {\r\n");
      out.write("                    //鼠标悬停在某个轨迹节点上\r\n");
      out.write("                    return pathData.name + '，点:' + pointIndex + '/' + pathData.path.length;\r\n");
      out.write("                }\r\n");
      out.write("                //鼠标悬停在节点之间的连线上\r\n");
      out.write("                return pathData.name + '，点数量' + pathData.path.length;\r\n");
      out.write("            },\r\n");
      out.write("            //绘制引擎的构造参数\r\n");
      out.write("            renderOptions: {\r\n");
      out.write("                //轨迹线的样式\r\n");
      out.write("                pathLineStyle: {\r\n");
      out.write("                    strokeStyle:'#000000',\r\n");
      out.write("                    //方向箭头样式，lineWidth>=4 时有效,为true时直接使用默认配置\r\n");
      out.write("                    dirArrowStyle: false\r\n");
      out.write("                },\r\n");
      out.write("                //根据轨迹索引和zoom返回样式配置\r\n");
      out.write("                getPathStyle: function (pathItem, zoom) {\r\n");
      out.write("                    var color = colors[pathItem.pathIndex],//依次取颜色\r\n");
      out.write("                        lineWidth = Math.round(3*Math.pow(1.1, zoom - 3));//线宽随zoom增大\r\n");
      out.write("                    return {\r\n");
      out.write("                        //轨迹线的样式 \r\n");
      out.write("                        pathLineStyle: {\r\n");
      out.write("                            strokeStyle: color,//线颜色\r\n");
      out.write("                            lineWidth: lineWidth//线宽度\r\n");
      out.write("                        },\r\n");
      out.write("                        //轨迹线处于选中状态时的样式\r\n");
      out.write("                        pathLineSelectedStyle: {\r\n");
      out.write("                            lineWidth: lineWidth + 2\r\n");
      out.write("                        },\r\n");
      out.write("                        //轨迹巡航器的样式\r\n");
      out.write("                        pathNavigatorStyle: {\r\n");
      out.write("                            fillStyle: color//填充色\r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("                },\r\n");
      out.write("                pathLinePassedStyle: {\r\n");
      out.write("                    strokeStyle:colorarr[0]\r\n");
      out.write("                }\r\n");
      out.write("            }\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("        var pathNavigs = [];\r\n");
      out.write("        function onload() {\r\n");
      out.write("            //图片加载成功，重新绘制一次\r\n");
      out.write("            pathSimplifierIns.renderLater();\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function onerror(e) {\r\n");
      out.write("            alert('图片加载失败！');\r\n");
      out.write("        }\r\n");
      out.write("        \r\n");
      out.write("        function getNavg(pathIndex) {\r\n");
      out.write("\r\n");
      out.write("            if (!pathNavigs[pathIndex]) {\r\n");
      out.write("                console.log(pathIndex)\r\n");
      out.write("                //创建一个轨迹巡航器\r\n");
      out.write("                navgtr = pathSimplifierIns.createPathNavigator(pathIndex, {\r\n");
      out.write("                    loop: false,//循环播放\r\n");
      out.write("                    speed: parseInt($('#speedInp_' + pathIndex).val()),\r\n");
      out.write("                    pathNavigatorStyle: {//轨迹巡航器的样式\r\n");
      out.write("                        width: 16,\r\n");
      out.write("                        height: 32,\r\n");
      out.write("                        content: PathSimplifier.Render.Canvas.getImageContent('../img/green/car1.png', onload, onerror),//巡航器的内容\r\n");
      out.write("                        strokeStyle: null,//描边色\r\n");
      out.write("                        fillStyle: null,//填充色\r\n");
      out.write("                        pathLinePassedStyle: {\r\n");
      out.write("                            lineWidth: 10,//线宽度\r\n");
      out.write("                            strokeStyle:colorarr[0]\r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("                \r\n");
      out.write("                pathSimplifierIns.on('pointClick', function(e, info){\r\n");
      out.write("                    // info.pathData 即是相关的轨迹数据，如果info.pointIndex >= 0，则表示由轨迹上的节点触发\r\n");
      out.write("                    var index = info.pointIndex+1;\r\n");
      out.write("                    navgtr.moveToPoint(index,0);\r\n");
      out.write("\t\t\t\t\tnavgtr.pause()\r\n");
      out.write("                    scroll();\r\n");
      out.write("\t\t\t\t\t\r\n");
      out.write("                });\r\n");
      out.write("                var tr;\r\n");
      out.write("                var index=navgtr.getCursor().idx;\r\n");
      out.write("                var timer2 = setInterval(scroll, 20);\r\n");
      out.write("\t\t\t\t//列表滚动\r\n");
      out.write("                function scroll(){\r\n");
      out.write("                    if(index !== navgtr.getCursor().idx){\r\n");
      out.write("                        index = navgtr.getCursor().idx;\r\n");
      out.write("                        console.info('当前滚动到的第几个点'+index);\r\n");
      out.write("                        if(index !=\"\"){\r\n");
      out.write("                            for(i=0;i<t1.rows.length;i++){\r\n");
      out.write("                                t1.rows[i].bgColor='';\r\n");
      out.write("                            }\r\n");
      out.write("                            //返回该列的所在行tr\r\n");
      out.write("                            tr=document.getElementById(index);\r\n");
      out.write("                            tr.bgColor='#409EFF';\r\n");
      out.write("                            window.location.href=\"#\"+index;\r\n");
      out.write("                        } \r\n");
      out.write("                    }\r\n");
      out.write("                    var lenght = pathSimplifierIns.getPathData(0).path.length;\r\n");
      out.write("                    console.info('pathSimplifierIns.getPathData(0).path.length='+lenght);\r\n");
      out.write("                    if(index==lenght-1){\r\n");
      out.write("                        // $('<div>').appendTo('body').addClass('alert alert-success').html('轨迹播放完毕！').show().delay(1500).fadeOut();\r\n");
      out.write("                        window.clearInterval(timer2);\r\n");
      out.write("                        navgtr.destroy();\r\n");
      out.write("                    }\r\n");
      out.write("                    \r\n");
      out.write("                }\r\n");
      out.write("                \r\n");
      out.write("                function changeNavgContent(){\r\n");
      out.write("                    //返回当前所处的索引位置\r\n");
      out.write("                    var cursor = navgtr.getCursor();\r\n");
      out.write("                        //获取到pathNavigatorStyle的引用\r\n");
      out.write("                        var pathNavigatorStyle = navgtr.getStyleOptions();\r\n");
      out.write("                        //覆盖修改\r\n");
      out.write("                        //车辆状态\r\n");
      out.write("                        var carstate = pathSimplifierIns.getPathData(0).path[cursor.idx][2];\r\n");
      out.write("                        //报警码\r\n");
      out.write("                        var alarmcode = pathSimplifierIns.getPathData(0).path[cursor.idx][3];\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                        //轨迹图标等于iconarr[当前位置的车辆状态],从iconarr[1]开始，因为车辆状态没有0（车辆位置信息表需要加车辆状态，api中保存）\r\n");
      out.write("                        for (var i=1;i<=iconarr.length;i++)\r\n");
      out.write("                        {\r\n");
      out.write("                            if(carstate==i){\r\n");
      out.write("                                pathNavigatorStyle.content=PathSimplifier.Render.Canvas.getImageContent(iconarr[i], onload, onerror)\r\n");
      out.write("                                \r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("                        if(carstate=='7'){\r\n");
      out.write("                                    //当车辆状态为报警时，查询车辆位置运行表的报警码，根据报警码显示不同的轨迹颜色\r\n");
      out.write("                                    //经过路径的样式\r\n");
      out.write("                                    if(typeof(alarmcode)!==\"undefined\"){\r\n");
      out.write("                                        var alarm = alarmcode.split(\",\");\r\n");
      out.write("                                        for (var j=0;j<alarm.length;j++)\r\n");
      out.write("                                        {\r\n");
      out.write("                                            if(alarm[j]=='alarmFlag_1')\r\n");
      out.write("                                            {//超速报警\r\n");
      out.write("                                                navgtr._opts.pathNavigatorStyle.pathLinePassedStyle.strokeStyle=colorarr[1];\r\n");
      out.write("\r\n");
      out.write("                                            }\r\n");
      out.write("                                            if(alarm[j]=='alarmFlag_37')\r\n");
      out.write("                                            {//进出区域报警\r\n");
      out.write("                                                navgtr._opts.pathNavigatorStyle.pathLinePassedStyle.strokeStyle=colorarr[2];\r\n");
      out.write("\r\n");
      out.write("                                            }\r\n");
      out.write("                                            if(alarm[j]=='alarmFlag_36')\r\n");
      out.write("                                            {//非工作时间报警\r\n");
      out.write("                                            navgtr._opts.pathNavigatorStyle.pathLinePassedStyle.strokeStyle=colorarr[3];\r\n");
      out.write("\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                        }\r\n");
      out.write("                                    }\r\n");
      out.write("                                }\r\n");
      out.write("                    //重新绘制\r\n");
      out.write("                    pathSimplifierIns.renderLater();\r\n");
      out.write("                }\r\n");
      out.write("                var $markerContent = $('<div class=\"markerInfo\"></div>');\r\n");
      out.write("\r\n");
      out.write("                $markerContent.html(pathSimplifierIns.getPathData(pathIndex).name);\r\n");
      out.write("\r\n");
      out.write("                navgtr.marker = new AMap.Marker({\r\n");
      out.write("                    icon: \"../img/car65.png\",\r\n");
      out.write("                    offset: new AMap.Pixel(12, -10),\r\n");
      out.write("                    content: $markerContent.get(0),\r\n");
      out.write("                    map: map\r\n");
      out.write("                });\r\n");
      out.write("                \r\n");
      out.write("                var $msg = $('#routes-container').find('div.route-item[data-idx=\"' +\r\n");
      out.write("                    pathIndex + '\"]').find('.msg');\r\n");
      out.write("                var timer;\r\n");
      out.write("                navgtr.on('move', function () {\r\n");
      out.write("                    navgtr.marker.setPosition(navgtr.getPosition());\r\n");
      out.write("                    $(\"#img0\").hide();\r\n");
      out.write("                    $(\"#img1\").show();\r\n");
      out.write("                    $(\"#img2\").hide();\r\n");
      out.write("                    $(\"#img3\").attr(\"src\", \"/img/stop2.png\");\r\n");
      out.write("                    $(\"#img4\").attr(\"src\", \"/img/destroy2.png\");\r\n");
      out.write("                    $(\"#img3,#img4\").css(\"cursor\", \"pointer\");\r\n");
      out.write("                });\r\n");
      out.write("\r\n");
      out.write("                navgtr.onDestroy(function () {\r\n");
      out.write("                    pathNavigs[pathIndex] = null;\r\n");
      out.write("                    navgtr.marker.setMap(null);\r\n");
      out.write("                    $msg.html('');\r\n");
      out.write("                    $(\"#img0\").show();\r\n");
      out.write("                    $(\"#img1\").hide();\r\n");
      out.write("                    $(\"#img2\").hide();\r\n");
      out.write("                    $(\"#img3\").attr(\"src\", \"/img/stop.png\");\r\n");
      out.write("                    $(\"#img4\").attr(\"src\", \"/img/destroy.png\");\r\n");
      out.write("                    $(\"#img3,#img4\").css(\"cursor\", \"default\");\r\n");
      out.write("                });\r\n");
      out.write("\r\n");
      out.write("                navgtr.on('start', function () {\r\n");
      out.write("                    timer = setInterval(changeNavgContent, 500);                   \r\n");
      out.write("                    navgtr._startTime = Date.now();\r\n");
      out.write("                    navgtr._startDist = this.getMovedDistance();\r\n");
      out.write("                    $(\"#img0\").hide();\r\n");
      out.write("                    $(\"#img1\").show();\r\n");
      out.write("                    $(\"#img2\").hide();\r\n");
      out.write("                    $(\"#img3\").attr(\"src\", \"/img/stop2.png\");\r\n");
      out.write("                    $(\"#img4\").attr(\"src\", \"/img/destroy2.png\");\r\n");
      out.write("                    $(\"#img3,#img4\").css(\"cursor\", \"pointer\");\r\n");
      out.write("                });\r\n");
      out.write("\r\n");
      out.write("                navgtr.on('resume', function () {\r\n");
      out.write("                    navgtr._startTime = Date.now();\r\n");
      out.write("                    navgtr._startDist = this.getMovedDistance();\r\n");
      out.write("                    $(\"#img0\").hide();\r\n");
      out.write("                    $(\"#img1\").show();\r\n");
      out.write("                    $(\"#img2\").hide();\r\n");
      out.write("                    $(\"#img3\").attr(\"src\", \"/img/stop2.png\");\r\n");
      out.write("                    $(\"#img4\").attr(\"src\", \"/img/destroy2.png\");\r\n");
      out.write("                    $(\"#img3,#img4\").css(\"cursor\", \"pointer\");\r\n");
      out.write("                });\r\n");
      out.write("\r\n");
      out.write("                navgtr.on('pause', function () {\r\n");
      out.write("                    $(\"#img0\").hide();\r\n");
      out.write("                    $(\"#img1\").hide();\r\n");
      out.write("                    $(\"#img2\").show();\r\n");
      out.write("                    $(\"#img3\").attr(\"src\", \"/img/stop.png\");\r\n");
      out.write("                    $(\"#img4\").attr(\"src\", \"/img/destroy2.png\");\r\n");
      out.write("                    $(\"#img3\").css(\"cursor\", \"default\");\r\n");
      out.write("                    $(\"#img4\").css(\"cursor\", \"pointer\");\r\n");
      out.write("                });\r\n");
      out.write("\r\n");
      out.write("                navgtr.on('stop', function () {\r\n");
      out.write("                    window.clearInterval(timer);\r\n");
      out.write("                    $(\"#img0\").show();\r\n");
      out.write("                    $(\"#img1\").hide();\r\n");
      out.write("                    $(\"#img2\").hide();\r\n");
      out.write("                    $(\"#img3\").attr(\"src\", \"/img/stop.png\");\r\n");
      out.write("                    $(\"#img4\").attr(\"src\", \"/img/destroy2.png\");\r\n");
      out.write("                    $(\"#img3\").css(\"cursor\", \"default\");\r\n");
      out.write("                    $(\"#img4\").css(\"cursor\", \"pointer\");\r\n");
      out.write("                });\r\n");
      out.write("\r\n");
      out.write("                navgtr.on('stop pause', function () {\r\n");
      out.write("                    window.clearInterval(timer);\r\n");
      out.write("                    navgtr._movedTime = Date.now() - navgtr._startTime;\r\n");
      out.write("                    navgtr._movedDist = this.getMovedDistance() - navgtr._startDist;\r\n");
      out.write("\r\n");
      out.write("                    navgtr._realSpeed = (navgtr._movedDist / navgtr._movedTime * 3600);\r\n");
      out.write("\r\n");
      out.write("                    var msgInfo = {\r\n");
      out.write("                        '状态': this.getNaviStatus(),\r\n");
      out.write("                        '设定速度': this.getSpeed() + ' km/h',\r\n");
      out.write("                        '总行进距离': Math.round(this.getMovedDistance() / 1000) + ' km',\r\n");
      out.write("                        '本段行进距离': Math.round(navgtr._movedDist / 1000) + ' km',\r\n");
      out.write("                        '本段耗时': (navgtr._movedTime / 1000) + ' s',\r\n");
      out.write("                        '本段实际速度': Math.round(navgtr._realSpeed) + ' km/h'\r\n");
      out.write("                    };\r\n");
      out.write("\r\n");
      out.write("                    $msg.html('<pre>' + JSON.stringify(msgInfo, null, 2) + '</pre>');\r\n");
      out.write("\r\n");
      out.write("                    refreshNavgButtons();\r\n");
      out.write("                });\r\n");
      out.write("\r\n");
      out.write("                navgtr.on('move', function () {\r\n");
      out.write("                    var msgInfo = {\r\n");
      out.write("                        '状态': this.getNaviStatus(),\r\n");
      out.write("                        '设定速度': this.getSpeed() + ' km/h',\r\n");
      out.write("                        '总行进距离': Math.round(this.getMovedDistance() / 1000) + ' km'\r\n");
      out.write("                    };\r\n");
      out.write("\r\n");
      out.write("                    $msg.html('<pre>' + JSON.stringify(msgInfo, null, 2) + '</pre>');\r\n");
      out.write("                });\r\n");
      out.write("                \r\n");
      out.write("                pathNavigs[pathIndex] = navgtr;\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            return pathNavigs[pathIndex];\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        var navigBtnsConf = [{\r\n");
      out.write("            name: '开始',\r\n");
      out.write("            action: 'start',\r\n");
      out.write("            enableExp: 'navgStatus === \"stop\" || navgStatus === \"pause\"'\r\n");
      out.write("        }\r\n");
      out.write("        , {\r\n");
      out.write("            name: '暂停',\r\n");
      out.write("            action: 'pause',\r\n");
      out.write("            enableExp: 'navgStatus === \"moving\"'\r\n");
      out.write("        }, {\r\n");
      out.write("            name: '恢复',\r\n");
      out.write("            action: 'resume',\r\n");
      out.write("            enableExp: 'navgStatus === \"pause\"'\r\n");
      out.write("        }\r\n");
      out.write("        , {\r\n");
      out.write("            name: '停止',\r\n");
      out.write("            action: 'stop',\r\n");
      out.write("            enableExp: 'navgStatus === \"moving\"'\r\n");
      out.write("        }, {\r\n");
      out.write("            name: '销毁',\r\n");
      out.write("            action: 'destroy',\r\n");
      out.write("            enableExp: 'navgExists'\r\n");
      out.write("        }];\r\n");
      out.write("\r\n");
      out.write("        function refreshNavgButtons() {\r\n");
      out.write("\r\n");
      out.write("            $('#routes-container').find('div.route-item').each(function () {\r\n");
      out.write("\r\n");
      out.write("                var pathIndex = parseInt($(this).attr('data-idx'), 0);\r\n");
      out.write("\r\n");
      out.write("                if (pathIndex < 0) {\r\n");
      out.write("                    return;\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                var navgStatus = 'stop',\r\n");
      out.write("                    navgExists = !!pathNavigs[pathIndex];\r\n");
      out.write("\r\n");
      out.write("                if (navgExists) {\r\n");
      out.write("                    navgStatus = pathNavigs[pathIndex].getNaviStatus();\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                $(this).find('.navigBtn').each(function () {\r\n");
      out.write("\r\n");
      out.write("                    var btnIdx = parseInt($(this).attr('data-btnIdx'));\r\n");
      out.write("\r\n");
      out.write("                    $(this).prop('disabled', !eval(navigBtnsConf[btnIdx].enableExp));\r\n");
      out.write("\r\n");
      out.write("                });\r\n");
      out.write("\r\n");
      out.write("            });\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function initRoutesContainer(data) {\r\n");
      out.write("\r\n");
      out.write("            $('#routes-container').on('click', '.navigBtn', function () {\r\n");
      out.write("                \r\n");
      out.write("                var pathIndex = parseInt($(this).closest('.route-item').attr('data-idx'), 0);\r\n");
      out.write("                console.log(pathIndex)\r\n");
      out.write("                var navg = getNavg(pathIndex);\r\n");
      out.write("\r\n");
      out.write("                navg[$(this).attr('data-act')]();\r\n");
      out.write("\r\n");
      out.write("                refreshNavgButtons();\r\n");
      out.write("            });\r\n");
      out.write("\r\n");
      out.write("            for (var i = 0, len = data.length; i < len; i++) {\r\n");
      out.write("                initRouteItem(data[i], i);\r\n");
      out.write("            }\r\n");
      out.write("            refreshNavgButtons();\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function initRouteItem(pathData, idx) {\r\n");
      out.write("\r\n");
      out.write("            var $routeItem = $('<div class=\"route-item\" style=\"width: 295px;\"></div>');\r\n");
      out.write("\r\n");
      out.write("            $routeItem.attr('data-idx', idx);\r\n");
      out.write("\r\n");
      out.write("            for (var i = 0, len = navigBtnsConf.length; i < len; i++) {\r\n");
      out.write("\r\n");
      out.write("                $('<img id=\"img'+i+'\" style=\"padding-right:15px;\" class=\"navigBtn col\" data-btnIdx=\"' + i + '\" data-act=\"' + navigBtnsConf[i].action + '\" src=\"/img/' + navigBtnsConf[i].action + '.png\">').html(navigBtnsConf[i].name).appendTo($routeItem);\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            $speedBox = $('<div class=\"speedBox col-md-5\" style=\"padding-left: 0px;padding-top: 5px;float:right;\"></div>').appendTo($routeItem);\r\n");
      out.write("\r\n");
      out.write("            var speedTxt = $('<span><span>').appendTo($speedBox);\r\n");
      out.write("\r\n");
      out.write("            var speedRangeInput = $('<input id=\"speedInp_' + idx +\r\n");
      out.write("                '\" class=\"speedRange\" type=\"range\" min=\"1000\" max=\"10000\" step=\"1000\" value=\"5000\" />').appendTo($speedBox);\r\n");
      out.write("\r\n");
      out.write("            function updateSpeedTxt() {\r\n");
      out.write("                var speed = parseInt(speedRangeInput.val(), 10);\r\n");
      out.write("                if (pathNavigs[idx]) {\r\n");
      out.write("                    pathNavigs[idx].setSpeed(speed);\r\n");
      out.write("                }\r\n");
      out.write("            }\r\n");
      out.write("            speedRangeInput.on('change', updateSpeedTxt);\r\n");
      out.write("\r\n");
      out.write("            updateSpeedTxt();\r\n");
      out.write("            \r\n");
      out.write("            $speedBox.appendTo($routeItem);            \r\n");
      out.write("            $(\"#routes-container\").empty()\r\n");
      out.write("            $routeItem.appendTo('#routes-container');\r\n");
      out.write("\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        window.pathSimplifierIns = pathSimplifierIns;\r\n");
      out.write("\r\n");
      out.write("        var d1 = [{ \"name\": name, \"path\": dl }]\r\n");
      out.write("        var flyRoutes = [];\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("        d1.push.apply(d1, flyRoutes);\r\n");
      out.write("\r\n");
      out.write("        pathSimplifierIns.setData(d1);\r\n");
      out.write("\r\n");
      out.write("        initRoutesContainer(d1);\r\n");
      out.write("\r\n");
      out.write("        pathSimplifierIns.on('selectedPathIndexChanged', function (e, info) {\r\n");
      out.write("\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("        pathSimplifierIns.on('pointClick pointMouseover pointMouseout', function (e, record) {\r\n");
      out.write("            //console.log(e.type, record);\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("        pathSimplifierIns.on('pathClick pathMouseover pathMouseout', function (e, record) {\r\n");
      out.write("            //console.log(e.type, record);\r\n");
      out.write("        });\r\n");
      out.write("    }\r\n");
      out.write("    );\r\n");
      out.write("}\r\n");
      out.write("            \r\n");
      out.write("            \r\n");
      out.write("</script>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("    $('#toolsbar').css('display','none');\r\n");
      out.write("        function GetQueryString(name)\r\n");
      out.write("        {\r\n");
      out.write("            var reg = new RegExp(\"(^|&)\"+ name +\"=([^&]*)(&|$)\");\r\n");
      out.write("            var r = window.location.search.substr(1).match(reg);\r\n");
      out.write("            console.log( unescape(r[2]))\r\n");
      out.write("            if(r!=null)return  unescape(r[2]); return null;\r\n");
      out.write("        }\r\n");
      out.write("        function daochu()\r\n");
      out.write("        {    \r\n");
      out.write("            var url = \"/p2p/com.cdms.guiji.GuiJiDaoChu.do?cph=\"+$(\"input[name='cph']\").val()\r\n");
      out.write("            +'&startime='+$(\"#value2\").val()\r\n");
      out.write("            +'&endtime='+$(\"#value3\").val()\r\n");
      out.write("            location.href=url;\r\n");
      out.write("            }\r\n");
      out.write("        function locationList(d)\r\n");
      out.write("        {\r\n");
      out.write("            jqueryManager(d,function(json){\r\n");
      out.write("\t\t\t\tconsole.info(json);\r\n");
      out.write("                if(json!==''&&json!='[]'){\r\n");
      out.write("                    $('#location').css('height','90px')\r\n");
      out.write("                    $('#jzgd').css(\"display\",\"none\")                        \r\n");
      out.write("                    eval(\"data=\"+json); \r\n");
      out.write("                    data.forEach(d => {\r\n");
      out.write("                    \r\n");
      out.write("                    d.ID = d.ID-1;\r\n");
      out.write("                    $(\"#location\").append(\"<tr onclick='jump(this)' style='cursor:pointer;' id='\"+d.ID+\"'>\"\r\n");
      out.write("                        +\"<th>\"+d.LICENSE_PLATE_NUMBER+\"</th>\"\r\n");
      out.write("                        +\"<th>\"+d.POSITIONING_TIME+\"</th>\"\r\n");
      out.write("                        +\"<th>\"+d.SPEED+\"km/h</th>\"\r\n");
      out.write("                        +\"<th>\"+d.CURRENT_MILEAGE+\"km</th>\"\r\n");
      out.write("                        +\"<th>\"+d.LOCATION+\"</th>\"\r\n");
      out.write("                        +\"<th>\"+d.CAR_STATE+\"</th>\"\r\n");
      out.write("                        +\"</tr>\")\r\n");
      out.write("                    });\r\n");
      out.write("\t\t\t\t\tvar dl=[];\r\n");
      out.write("\t\t\t\t\teval(\"data=\"+json); \r\n");
      out.write("                                    var name=''\r\n");
      out.write("                                    data.forEach(d => {\r\n");
      out.write("                                        name=d.LICENSE_PLATE_NUMBER\r\n");
      out.write("                                        var ddl=[d.LNG,d.LAT,d.DRIVING_BEHAVIOR_STATUS,d.ALARM_STATUS,d.STATE_OF_VEHICLE,d.ID]\r\n");
      out.write("                                        dl.push(ddl)\r\n");
      out.write("                                    });\r\n");
      out.write("                                    mapload(dl,name)\r\n");
      out.write("\t\t\t\t\t\r\n");
      out.write("                }else{\r\n");
      out.write("                    $('#location').css('height','0')\r\n");
      out.write("                    $('#jzgd').css(\"display\",\"block\")\r\n");
      out.write("                }\r\n");
      out.write("            })\r\n");
      out.write("        }\r\n");
      out.write("        // function jz()\r\n");
      out.write("        // {\r\n");
      out.write("        //     if($('#jzgd').attr('name')!=null){\r\n");
      out.write("        //         $('#jzgd').attr('name',eval($('#jzgd').attr('name')+\"+1\"))\r\n");
      out.write("        //         console.log($('#jzgd').attr('name'))\r\n");
      out.write("        //         var d={\r\n");
      out.write("        //             action:'com.cdms.guiji.GuiJiFindLocaltionList',\r\n");
      out.write("        //             cph:$(\"input[name='cph']\").val(),\r\n");
      out.write("        //             startime:$(\"#value2\").val(),\r\n");
      out.write("        //             endtime:$(\"#value3\").val(),\r\n");
      out.write("        //             pagefenye:'off',\r\n");
      out.write("        //             page:$('#jzgd').attr('name')\r\n");
      out.write("        //         }\r\n");
      out.write("        //         locationList(d)\r\n");
      out.write("        //     }\r\n");
      out.write("            \r\n");
      out.write("        // }\r\n");
      out.write("        function xzCar()\r\n");
      out.write("        {\r\n");
      out.write("            $(\"input[name='cph']\").val($(\"input[name='table']:checked\").val())\r\n");
      out.write("        }\r\n");
      out.write("        function loadcz()\r\n");
      out.write("        {    \r\n");
      out.write("            var d={\r\n");
      out.write("            action:'com.cdms.guiji.GuiJiFindCarGroup',\r\n");
      out.write("            orgid:GetQueryString('orgid')\r\n");
      out.write("            }\r\n");
      out.write("            jqueryManager(d,function(json){\r\n");
      out.write("                if(json!=''){\r\n");
      out.write("                    eval(\"data=\"+json); \r\n");
      out.write("                    data.forEach(d => {\r\n");
      out.write("                        $(\"#fencetype\").append('<option value=\"'+d.ORGID+'\">'+d.ORGNAME+'</option>')    \r\n");
      out.write("                    });\r\n");
      out.write("                }\r\n");
      out.write("            })\r\n");
      out.write("        }\r\n");
      out.write("        function carxx(Data)\r\n");
      out.write("        {\r\n");
      out.write("            jqueryManager(Data,function(json){\r\n");
      out.write("                if(json!=''&&json!=='[]'){\r\n");
      out.write("                    $('#tb').css('height','250px');\r\n");
      out.write("                    $('#nodata').css('display','none');\r\n");
      out.write("                    eval(\"data=\"+json);\r\n");
      out.write("                    data.forEach(d => {\r\n");
      out.write("                        $(\"#tb\").append('<tr ><td><input name=\"table\" id=\"'+d.DEVICE_SN_NUMBER+'\" type=\"radio\" value='+d.LICENSE_PLATE_NUMBER+'></td><td>'+d.LICENSE_PLATE_NUMBER+'</td><td>'+d.ORGNAME+'</td></tr>')\r\n");
      out.write("                    });\r\n");
      out.write("                }else{\r\n");
      out.write("                    $('#tb').css('height','0');\r\n");
      out.write("                    $('#nodata').css('display','block');\r\n");
      out.write("                }\r\n");
      out.write("            }) \r\n");
      out.write("        }\r\n");
      out.write("        function czquery()\r\n");
      out.write("        {\r\n");
      out.write("            $(\"#tb\").empty();\r\n");
      out.write("            var Data={\r\n");
      out.write("                action:'com.cdms.guiji.GuiJiFindCarListByorgid',\r\n");
      out.write("                orgid:$(\"#fencetype\").val()\r\n");
      out.write("            }\r\n");
      out.write("            carxx(Data) \r\n");
      out.write("        } \r\n");
      out.write("        $(function()\r\n");
      out.write("        {\r\n");
      out.write("            loadcz()\r\n");
      out.write("            var Data={\r\n");
      out.write("                action:'com.cdms.guiji.GuiJiFindCarListByorgid'\r\n");
      out.write("            } \r\n");
      out.write("        })\r\n");
      out.write("</script>\r\n");
      out.write("<script >\r\n");
      out.write("                    //var d = [{ \"name\": \"\", \"path\": [[116.405289, 39.904987], [116.406265, 39.905015], [116.406441, 39.905018], [116.406647, 39.905018], [116.406647, 39.905018], [116.40667, 39.904457], [116.4067, 39.903893], [116.4067, 39.903473], [116.4067, 39.902996], [116.406731, 39.902462], [116.406731, 39.901714], [116.406731, 39.901463], [116.406731, 39.901031], [116.406738, 39.901001], [116.406746, 39.900829], [116.406746, 39.900829], [116.405731, 39.90081], [116.404793, 39.900787], [116.403557, 39.900745], [116.403076, 39.90073], [116.402534, 39.900673], [116.401474, 39.900539], [116.399826, 39.900299], [116.399635, 39.900291], [116.398956, 39.900257], [116.396423, 39.900181], [116.396111, 39.900188], [116.396019, 39.900192], [116.395035, 39.900261], [116.393898, 39.900356], [116.393372, 39.900391], [116.393089, 39.900398], [116.392677, 39.90041], [116.3918, 39.900387], [116.390381, 39.900356], [116.389412, 39.900326], [116.388039, 39.900288], [116.386444, 39.900227], [116.385536, 39.900208], [116.384285, 39.900158], [116.384132, 39.90015], [116.382462, 39.900108], [116.381516, 39.900082], [116.381226, 39.900074], [116.380417, 39.90004], [116.378304, 39.899963], [116.377563, 39.89994], [116.377243, 39.899929], [116.377014, 39.899918], [116.374428, 39.899857], [116.374237, 39.899849], [116.373009, 39.899792], [116.37278, 39.89978], [116.371475, 39.899742], [116.371162, 39.899731], [116.368927, 39.899662], [116.368629, 39.899647], [116.367584, 39.899612], [116.366348, 39.899574], [116.36554, 39.899548], [116.365135, 39.89954], [116.364464, 39.899509], [116.363419, 39.899483], [116.363297, 39.899479], [116.363197, 39.899475], [116.360748, 39.899395], [116.359116, 39.899349], [116.358742, 39.899326], [116.358383, 39.899292], [116.358025, 39.899254], [116.357719, 39.899197], [116.357445, 39.899136], [116.356979, 39.899002], [116.356781, 39.898941], [116.356277, 39.898754], [116.355415, 39.898373], [116.355415, 39.898373], [116.355072, 39.898262], [116.354843, 39.898209], [116.354355, 39.898121], [116.354149, 39.898094], [116.352913, 39.898006], [116.35038, 39.897816], [116.350136, 39.8978], [116.349876, 39.897789], [116.349632, 39.897781], [116.34951, 39.897778], [116.349182, 39.897797], [116.348473, 39.89785], [116.347588, 39.897907], [116.346939, 39.897926], [116.345535, 39.897877], [116.343033, 39.897736], [116.339699, 39.89756], [116.338036, 39.897495], [116.337288, 39.897453], [116.336502, 39.897411], [116.334221, 39.897285], [116.332024, 39.897182]] }]\r\n");
      out.write("                    //时间减天计算 dayNumber为要减天数,data为要减时间,默认为当前时间\r\n");
      out.write("                    function subDay(dayNumber, date) {\r\n");
      out.write("                        date = date ? date : new Date();\r\n");
      out.write("                        var ms = dayNumber * (1000 * 60 * 60 * 24)\r\n");
      out.write("                        var newDate = new Date(date.getTime() - ms);\r\n");
      out.write("                        return newDate;\r\n");
      out.write("                    }\r\n");
      out.write("                \r\n");
      out.write("                    var Main = {\r\n");
      out.write("                        data() {\r\n");
      out.write("                            return {\r\n");
      out.write("                                value2: subDay(1/12),\r\n");
      out.write("                                value3: subDay(0) ,\r\n");
      out.write("                                //结束时间选择范围\r\n");
      out.write("                                pickerOptions1:{\r\n");
      out.write("                                    disabledDate: (time) => {\r\n");
      out.write("                                    let beginDateVal = this.value3\r\n");
      out.write("                                    if (beginDateVal) {\r\n");
      out.write("                                        return (subDay(7,new Date(beginDateVal))>new Date(time))||(new Date(time)>new Date(beginDateVal))\r\n");
      out.write("                                    }\r\n");
      out.write("                                    }        \r\n");
      out.write("                                },\r\n");
      out.write("                                //开始时间选择范围\r\n");
      out.write("                                pickerOptions2:{\r\n");
      out.write("                                    disabledDate: (time) => {\r\n");
      out.write("                                    let beginDateVal = this.value2\r\n");
      out.write("                                    if (beginDateVal) {\r\n");
      out.write("                                        return (subDay(-7,new Date(beginDateVal))<new Date(time))||(new Date(time)<new Date(beginDateVal))\r\n");
      out.write("                                    }\r\n");
      out.write("                                    }        \r\n");
      out.write("                                },\r\n");
      out.write("                                query: function (event) {\r\n");
      out.write("                                    $('<div>').appendTo('body').addClass('alert alert-success').html('正在查询中!').show().delay(500).fadeOut();\r\n");
      out.write("                                    $(\"#cx\").text(\"正在查询中...\")\r\n");
      out.write("                                    $(\"#tb\").empty();\r\n");
      out.write("                                    var b=$(\"input[name='cph']\").val()!=''&&$(\"#value2\").val()!=''&&$(\"#value3\").val()!=''\r\n");
      out.write("                                    if(b){\r\n");
      out.write("                                        \r\n");
      out.write("                                        \r\n");
      out.write("                                        var d={\r\n");
      out.write("                                            action:'com.cdms.guiji.GuiJiFindLocaltionList',\r\n");
      out.write("                                            cph:$(\"input[name='cph']\").val(),\r\n");
      out.write("                                            startime:$(\"#value2\").val(),\r\n");
      out.write("                                            endtime:$(\"#value3\").val(),\r\n");
      out.write("                                            pagefenye:'off',\r\n");
      out.write("                                        }\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tconsole.info(d);\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t$('#location').empty()\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tlocationList(d)\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t$('#toolsbar').css('display','block');\r\n");
      out.write("                                            $(\"#cx\").text(\"查询\")\r\n");
      out.write("                                        \r\n");
      out.write("                                        \r\n");
      out.write("                                    }else{\r\n");
      out.write("\t\t\t\t\t                    window.wxc.xcConfirm(\"请输入完整的查询条件\");\r\n");
      out.write("                                    }\r\n");
      out.write("                                }\r\n");
      out.write("                            };\r\n");
      out.write("                           \r\n");
      out.write("                        }\r\n");
      out.write("                    }\r\n");
      out.write("                    var Ctor = Vue.extend(Main)\r\n");
      out.write("                    new Ctor().$mount('#app') \r\n");
      out.write("                </script>\r\n");
      out.write("                <script type=\"text/javascript\" charset=\"UTF-8\">\r\n");
      out.write("\r\n");
      out.write("                    var map = new AMap.Map('container', {\r\n");
      out.write("                        resizeEnable: true\r\n");
      out.write("                    })\r\n");
      out.write("                    var cph = '");
      out.print(cph);
      out.write("'\r\n");
      out.write("                    if(typeof(cph) == \"undefined\"){\r\n");
      out.write("                        cph='';\r\n");
      out.write("                    }\r\n");
      out.write("                    $(\"input[name='cph']\").val(cph)\r\n");
      out.write("                    \r\n");
      out.write("                        \r\n");
      out.write("\r\n");
      out.write("                        var d={\r\n");
      out.write("                            action:'com.cdms.guiji.GuiJiFindLocaltionList',\r\n");
      out.write("                            cph:'");
      out.print(cph);
      out.write("',\r\n");
      out.write("                            \r\n");
      out.write("\t\t\t\t\t\t\tstartime:$(\"#value2\").val(),\r\n");
      out.write("                            endtime:$(\"#value3\").val(),\r\n");
      out.write("                            pagefenye:'off',\r\n");
      out.write("                            }\r\n");
      out.write("\t\t\t\t\t\t\t$('#location').empty()\r\n");
      out.write("\t\t\t\t\t\tconsole.info(d);\r\n");
      out.write("                        locationList(d)\r\n");
      out.write("                        \r\n");
      out.write("                        \r\n");
      out.write("                </script>\r\n");
      out.write("                <script>\r\n");
      out.write("                    $(function () {\r\n");
      out.write("                        $(\"#min\").click(function () {\r\n");
      out.write("                            $('#bottom').hide();\r\n");
      out.write("                            $(\"#max\").show();\r\n");
      out.write("                        });\r\n");
      out.write("                        $(\"#max\").click(function () {\r\n");
      out.write("                            $('#bottom').show();\r\n");
      out.write("                            $(\"#max\").hide();\r\n");
      out.write("                        });\r\n");
      out.write("                    });\r\n");
      out.write("</script>\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
